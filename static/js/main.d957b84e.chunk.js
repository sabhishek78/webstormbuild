(this.webpackJsonphacker_times_web=this.webpackJsonphacker_times_web||[]).push([[0],[,,,,,,,,,,,function(e,t,s){e.exports=s(25)},,,,,function(e,t,s){},function(e,t,s){e.exports=s.p+"static/media/logo.5d5d9eef.svg"},function(e,t,s){},,function(e,t,s){},function(e,t,s){},,,function(e,t,s){},function(e,t,s){"use strict";s.r(t);var r=s(0),a=s.n(r),n=s(10),o=s.n(n),i=(s(16),s(17),s(18),s(6)),l=s.n(i),c=s(8),h=s(1),m=s(2),p=s(3),u=s(4),f=(s(20),s(21),s(7)),g=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(m.a)(s,[{key:"calculateTime",value:function(e){var t=new Date,s=Math.floor(t.getTime()/1e3)-e,r=Math.floor(s/86400),a=Math.floor(s%86400/3600),n=Math.floor(s%3600/60),o=r>0?r+"d":"",i=a>0?a+"h":"";return""!==o?o+i:""===o?i+(n>0?n+"m":""):void 0}},{key:"extractDomainFromUrl",value:function(e){try{return new URL(e).hostname.replace("www.","")}catch(t){return""}}},{key:"render",value:function(){return a.a.createElement("div",{className:"popularNewsCard"},void 0!==this.props.newsItem.htImage&&a.a.createElement("a",{href:this.props.newsItem.url,target:"_blank"},a.a.createElement("img",{className:"image",src:this.props.newsItem.htImage,alt:""})),a.a.createElement("a",{href:this.props.newsItem.url,style:{textDecoration:"none"},target:"_blank"},a.a.createElement("h2",{class:"underline-on-hover"},this.props.newsItem.title)),a.a.createElement("div",null,a.a.createElement(f.a,{lines:5,ellipsis:a.a.createElement("span",null,"... ",a.a.createElement("a",{href:this.props.newsItem.url},"Read more"))},this.props.newsItem.htDescription)),a.a.createElement("div",{className:"footer"},a.a.createElement("div",{className:"footerRow"},a.a.createElement("a",{className:"alignTextLeft",href:this.props.newsItem.url},this.extractDomainFromUrl(this.props.newsItem.url)),a.a.createElement("div",null,this.calculateTime(this.props.newsItem.time)," ago")),a.a.createElement("div",{className:"footerRow"},a.a.createElement("div",{className:"comments"},a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},a.a.createElement("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"}),a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),a.a.createElement("div",null,a.a.createElement("a",{href:"https://news.ycombinator.com/item?id="+this.props.newsItem.id},void 0===this.props.newsItem.kids?0:this.props.newsItem.kids.length," comments"))),a.a.createElement("div",null,this.props.newsItem.score," points"))))}}]),s}(a.a.Component),d=(s(24),function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(m.a)(s,[{key:"calculateTime",value:function(e){var t=new Date,s=Math.floor(t.getTime()/1e3)-e,r=Math.floor(s/86400),a=Math.floor(s%86400/3600),n=Math.floor(s%3600/60),o=r>0?r+"d":"",i=a>0?a+"h":"";return""!==o?o+i:""===o?i+(n>0?n+"m":""):void 0}},{key:"extractDomainFromUrl",value:function(e){try{return new URL(e).hostname.replace("www.","")}catch(t){return""}}},{key:"truncateString",value:function(e){if(void 0!==e)return e.length<200?e:e.substring(0,200)+"...";return" ".padEnd(200)}},{key:"render",value:function(){return a.a.createElement("div",{className:"newsCard2"},a.a.createElement("a",{href:this.props.newsItem.url,target:"_blank"},a.a.createElement("h3",{class:"underline-on-hover"}," ",this.props.newsItem.title)),a.a.createElement("div",{className:"textAndImageNC2"},void 0!==this.props.newsItem.htImage&&a.a.createElement("a",{href:this.props.newsItem.url,target:"_blank"},a.a.createElement("img",{className:"floatImageRight",src:this.props.newsItem.htImage,alt:""})),a.a.createElement(f.a,{lines:3,ellipsis:a.a.createElement("span",null,"... ",a.a.createElement("a",{href:this.props.newsItem.url},"Read more"))},this.props.newsItem.htDescription)),a.a.createElement("div",{className:"footer"},a.a.createElement("div",{className:"footerRow"},a.a.createElement("a",{className:"alignTextLeft",href:this.props.newsItem.url},this.extractDomainFromUrl(this.props.newsItem.url)),a.a.createElement("div",null,this.calculateTime(this.props.newsItem.time)," ago")),a.a.createElement("div",{className:"footerRow"},a.a.createElement("div",{className:"comments"},a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},a.a.createElement("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"}),a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),a.a.createElement("div",null,a.a.createElement("a",{href:"https://news.ycombinator.com/item?id="+this.props.newsItem.id},void 0===this.props.newsItem.kids?0:this.props.newsItem.kids.length," comments"))),a.a.createElement("div",null,this.props.newsItem.score," points"))))}}]),s}(a.a.Component)),v=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(m.a)(s,[{key:"render",value:function(){return a.a.createElement("div",{className:"row1"},a.a.createElement("div",{id:"left-col"},void 0!==this.props.stories[0]&&a.a.createElement(g,{newsItem:this.props.stories[0]})),a.a.createElement("div",{id:"middle-col"},void 0!==this.props.stories[1]&&a.a.createElement(g,{newsItem:this.props.stories[1]}),void 0!==this.props.stories[2]&&a.a.createElement(d,{newsItem:this.props.stories[2]})),a.a.createElement("div",{id:"right-col"},void 0!==this.props.stories[3]&&a.a.createElement(g,{newsItem:this.props.stories[3]}),void 0!==this.props.stories[4]&&a.a.createElement(d,{newsItem:this.props.stories[4]})))}}]),s}(a.a.Component),w=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(m.a)(s,[{key:"render",value:function(){return a.a.createElement("div",{className:"row2"},a.a.createElement("div",{id:"middle-col"},void 0!==this.props.stories[0]&&a.a.createElement(g,{newsItem:this.props.stories[0]}),void 0!==this.props.stories[1]&&a.a.createElement(d,{newsItem:this.props.stories[1]})),a.a.createElement("div",{id:"middle-col"},void 0!==this.props.stories[2]&&a.a.createElement(g,{newsItem:this.props.stories[2]}),void 0!==this.props.stories[3]&&a.a.createElement(d,{newsItem:this.props.stories[3]})),a.a.createElement("div",{id:"middle-col"},void 0!==this.props.stories[4]&&a.a.createElement(g,{newsItem:this.props.stories[4]}),void 0!==this.props.stories[5]&&a.a.createElement(d,{newsItem:this.props.stories[5]})),a.a.createElement("div",{id:"middle-col"},void 0!==this.props.stories[6]&&a.a.createElement(d,{newsItem:this.props.stories[6]}),void 0!==this.props.stories[7]&&a.a.createElement(d,{newsItem:this.props.stories[7]})))}}]),s}(a.a.Component),E=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(m.a)(s,[{key:"render",value:function(){return a.a.createElement("div",{className:"section3"},void 0!==this.props.stories[0]&&a.a.createElement(g,{className:"section3Story",newsItem:this.props.stories[0]}),void 0!==this.props.stories[1]&&a.a.createElement(g,{className:"section3Story",newsItem:this.props.stories[1]}))}}]),s}(a.a.Component),y=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(m.a)(s,[{key:"render",value:function(){return a.a.createElement("div",{className:"row4"},void 0!==this.props.stories[0]&&a.a.createElement(d,{newsItem:this.props.stories[0]}),void 0!==this.props.stories[1]&&a.a.createElement(d,{newsItem:this.props.stories[1]}))}}]),s}(a.a.Component),I=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(m.a)(s,[{key:"render",value:function(){console.log("rendering newsgrid"),console.log(this.props.stories.length);for(var e=0,t=this.props.stories[e],s=[];e<this.props.stories.length;)5===t.length?s.push(a.a.createElement(v,{stories:this.props.stories[e]})):8===t.length?s.push(a.a.createElement(w,{stories:this.props.stories[e]})):2===t.length?s.push(a.a.createElement(E,{stories:this.props.stories[e]})):s.push(a.a.createElement(y,{stories:this.props.stories[e]})),e+=1;return a.a.createElement("div",null,s)}}]),s}(a.a.Component),b=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e){var r;return Object(h.a)(this,s),(r=t.call(this,e)).state={stories:[],storiesLoaded:!1},r}return Object(m.a)(s,[{key:"componentDidMount",value:function(){this.fetchTopStories()}},{key:"fetchTopStories",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,s,r,a,n,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],s=[],r=[],e.next=5,fetch("https://hacker-times.s3-us-west-1.amazonaws.com/topStories_prod");case 5:return a=e.sent,e.next=8,a.json();case 8:n=e.sent,o=this.getStoriesWithImage(n.top),t=this.getStoriesWithoutImage(n.top),console.log("no of stories without image="+t.length),s=this.getPopularStoriesWithImage(o),console.log("no of popular stories with image="+s.length),r=this.getUnPopularStoriesWithImage(o),console.log("no of unpopular stories with image="+r.length),console.log("fetch finished"),i=this.newsCardGenerator(s,r,t),console.log("result Array of stories after sorting..."),console.log(i),console.log("No of stories="+i.length),this.setState({stories:i,storiesLoaded:!0});case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPopularStoriesWithImage",value:function(e){for(var t=[],s=0;s<e.length;s++)this.isPopular(e[s])&&t.push(e[s]);return t}},{key:"getUnPopularStoriesWithImage",value:function(e){for(var t=[],s=0;s<e.length;s++)this.isPopular(e[s])||t.push(e[s]);return t}},{key:"hasImage",value:function(e){return void 0!==e.htImage}},{key:"isPopular",value:function(e){var t=new Date,s=Math.floor(t.getTime()/1e3)-e.time,r=Math.floor(s%86400/3600),a=e.score;return r<12&&r>0&&a>=10*r||r>=12&&a>=120}},{key:"getStoriesWithImage",value:function(e){for(var t=[],s=0;s<e.length;s++)this.hasImage(e[s])&&t.push(e[s]);return t}},{key:"getStoriesWithoutImage",value:function(e){for(var t=[],s=0;s<e.length;s++)this.hasImage(e[s])||t.push(e[s]);return t}},{key:"getTabName",value:function(){for(var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t=(new Date).getDay(),s=[],r=t;r>=0;r--)s.push(r);for(var a=6;a>t;a--)s.push(a);for(var n=[],o=0;o<s.length;o++)n.push(e[s[o]]);return n}},{key:"fetchNthDayStories",value:function(){var e=Object(c.a)(l.a.mark((function e(t,s){var r,a,n,o,i,c,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),r=[],a=[],n=[],e.next=6,fetch(0===t?"https://hacker-times.s3-us-west-1.amazonaws.com/topStories_prod":"https://cors-anywhere.herokuapp.com/https://hacker-times.s3-us-west-1.amazonaws.com/"+t+"dayStories_prod");case 6:return o=e.sent,e.next=9,o.json();case 9:i=e.sent,c=this.getStoriesWithImage(i.top),r=this.getStoriesWithoutImage(i.top),console.log("no of stories without image="+r.length),a=this.getPopularStoriesWithImage(c),console.log("no of popular stories with image="+a.length),n=this.getUnPopularStoriesWithImage(c),console.log("no of unpopular stories with image="+n.length),console.log("fetch finished"),h=this.newsCardGenerator(a,n,r),console.log("result Array of stories after sorting..."),console.log(h),console.log("No of stories="+h.length),this.setState({stories:h,storiesLoaded:!0});case 23:case"end":return e.stop()}}),e,this)})));return function(t,s){return e.apply(this,arguments)}}()},{key:"newsCardGenerator",value:function(e,t,s){console.log("inside newsCardGenerator"),console.log("length of pArray="+e.length),console.log("length of uArray="+t.length),console.log("length of wArray="+s.length);for(var r=[];0!==e.length||0!==t.length||0!==s.length;)r.push(e.length>1?this.getSection1(e,s,t):this.getSection2(e,s,t)),r.push(this.getSection2(e,s,t)),r.push(e.length>=2?this.getSection3(e,s,t):this.getSection2(e,s,t)),r.push(this.getSection2(e,s,t));console.log("resultArray.length="+r.length);for(var a=[],n=0;n<r.length;n++)""!==r[n]&&a.push(r[n]);return a}},{key:"getSection1",value:function(e,t,s){var r=[];r.push(e.shift());for(var a=1;a<=2;a++){var n=this.getBlock(e,t,s);r.push(n[0]),r.push(n[1])}return console.log("printing section1"),console.log(JSON.stringify(r)),r}},{key:"getSection3",value:function(e,t,s){var r=[];return r.push(e.shift()),r.push(e.shift()),r}},{key:"getSection2",value:function(e,t,s){for(var r=[],a=1;a<=4;a++){var n=this.getBlock(e,t,s);r.push(n[0]),r.push(n[1])}return r}},{key:"getBlock",value:function(e,t,s){var r=[];return 0!==e.length&&0!==t.length?(r.push(e.shift()),r.push(t.shift())):s.length>=2?(r.push(s.shift()),r.push(s.shift())):t.length>=2?(r.push(t.shift()),r.push(t.shift())):(0!==e.length&&r.push(e.shift()),0!==s.length&&r.push(s.shift()),0!==t.length&&r.push(t.shift())),r}},{key:"render",value:function(){var e=this,t=this.getTabName();return a.a.createElement("div",{className:"main-column"},a.a.createElement("div",{className:"Title"},a.a.createElement("h1",{className:"title"},"The McLaren Times ")),a.a.createElement("div",{className:"Tabs"},a.a.createElement("button",{className:"tab",onClick:function(t){return e.fetchTopStories()}},t[0]),a.a.createElement("button",{className:"tab",onClick:function(t){return e.fetchNthDayStories(1,t)}},t[1]),a.a.createElement("button",{className:"tab",onClick:function(t){return e.fetchNthDayStories(2,t)}},t[2]),a.a.createElement("button",{className:"tab",onClick:function(t){return e.fetchNthDayStories(3,t)}},t[3]),a.a.createElement("button",{className:"tab",onClick:function(t){return e.fetchNthDayStories(4,t)}},t[4]),a.a.createElement("button",{className:"tab",onClick:function(t){return e.fetchNthDayStories(5,t)}},t[5]),a.a.createElement("button",{className:"tab",onClick:function(t){return e.fetchNthDayStories(6,t)}},t[6])),this.state.storiesLoaded?a.a.createElement(I,{stories:this.state.stories}):"")}}]),s}(a.a.Component);var k=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(b,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[11,1,2]]]);
//# sourceMappingURL=main.d957b84e.chunk.js.map